{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
	<canvas style="width: 100vmin; height: 80vmin; background: black;" id="pixi-canvas"></canvas>
	<script src='{% static "/js/pixi.js" %}'></script>
	<script type="text/javascript">
		const canvas = document.getElementById('pixi-canvas');

		//Aliases
		let Application = PIXI.Application,
		    loader = PIXI.Loader.shared,
		    resources = PIXI.loader.resources,
		    Rectangle = PIXI.Rectangle,
		    TextureCache = PIXI.utils.TextureCache,
		    Sprite = PIXI.Sprite;

		const app = new Application({                    
		    view: canvas,
		    antialias: true,
			backgroundColor: 0x1099bb,
		});

		loader
		  	.add('{% static "/images/sprite-game.json" %}')
		 	.load(setup);

		let imgs, background, door, player, pirate, big, cucumber, captain;
		function setup() {
			let rectangle = new Rectangle(0, 97, 190, 190);

  			imgs = resources['{% static "/images/sprite-game.json" %}'].textures; 
  			let backTexture = TextureCache["Tile-Sets.png"];
  			backTexture.frame = rectangle;
  			background = new Sprite(backTexture);
  			background.scale.set(3,3);
  			app.stage.addChild(background);

  			door = new Sprite(imgs["door.png"]);
  			door.position.set(400,100);
  			app.stage.addChild(door);

  			player = new Sprite(imgs["player.png"]);
  			player.position.set(100,100);
  			app.stage.addChild(player);

  			pirate = new Sprite(imgs["pirate.png"]);
  			pirate.position.set(300,100);
  			app.stage.addChild(pirate);

  			big = new Sprite(imgs["big.png"]);
  			big.position.set(300,400);
  			app.stage.addChild(big);

  			cucumber = new Sprite(imgs["cucumber.png"]);
  			cucumber.position.set(400,400);
  			app.stage.addChild(cucumber);

  			captain = new Sprite(imgs["captain.png"]);
  			captain.position.set(500,400);
  			app.stage.addChild(captain);
		}

		console.log(app.renderer.width);
		console.log(app.renderer.height);
	</script>
{% endblock %}